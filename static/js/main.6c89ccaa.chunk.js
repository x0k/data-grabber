(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{249:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(16),o=a.n(i),l=a(89),s=a(18),c=a(19),u=a(97),m=a(90),h=a(98),p=a(31),d=a.n(p),f=a(92),g=a.n(f),b=a(93),v=a.n(b),O=a(55),j=a.n(O),w=a(26),E=a.n(w),k=a(94),y=a.n(k),C=a(95),S=a.n(C),N=a(96),H=a.n(N),I=a(54),P=function(e){var t=e.label,a=e.value,n=e.onChange;return r.a.createElement(E.a,{label:t,fullWidth:!0,multiline:!0,variant:"outlined",value:a,onChange:n})},x=a(27),L=a(15),A=function(){function e(t){var a=this;Object(s.a)(this,e),Object.defineProperty(this,U,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:!1}),Object.defineProperty(this,q,{writable:!0,value:null}),Object.defineProperty(this,z,{writable:!0,value:function(e){Object(L.a)(a,T)[T]=e,Object(L.a)(a,q)[q]&&Object(L.a)(a,q)[q](e)}});var n=function(){Object(L.a)(a,W)[W]=Object(L.a)(a,U)[U].auth2.getAuthInstance(),Object(L.a)(a,W)[W].isSignedIn.listen(Object(L.a)(a,z)[z]),Object(L.a)(a,z)[z](Object(L.a)(a,W)[W].isSignedIn.get())},r=function(){Object(L.a)(a,U)[U].client.init(t).then(n)},i=function(){Object(L.a)(a,U)[U]=window.gapi,Object(L.a)(a,U)[U].load("client:auth2",r)};window.gapi?i():window.addEventListener("gapiLoaded",i)}return Object(c.a)(e,[{key:"authorize",value:function(){return Object(L.a)(this,T)[T]?Object(L.a)(this,W)[W].signOut():Object(L.a)(this,W)[W].signIn()}},{key:"fetch",value:function(e){var t={function:"fetch",parameters:[e],devMode:!0},a=Object(L.a)(this,U)[U].client.request({root:"https://script.googleapis.com",path:"v1/scripts/M1qUJ-bECOgm4Y9z9evwE5gNpR_a-QLCI:run",method:"POST",body:t});return new Promise(function(e,t){a.execute(function(a){if(a.error&&a.error.status)t("Error calling API: "+JSON.stringify(a,null,2));else if(a.error){var n=a.error.details[0];t("Script error! Message: "+n.errorMessage)}else e(a.response.result)})})}},{key:"onStatusUpdate",set:function(e){Object(L.a)(this,q)[q]=e}},{key:"user",get:function(){return Object(L.a)(this,W)[W].currentUser.get()}}]),e}(),U=Object(x.a)("gapi"),W=Object(x.a)("googleAuth"),T=Object(x.a)("isAuthorized"),q=Object(x.a)("onStatusUpdate"),z=Object(x.a)("satusUpdate"),M=new A({apiKey:"AIzaSyA0rvMrNVWVhm8HNd56eY64OXhVEVIxqlQ",clientId:"169025190639-ktoqejmqod0hcfh8pbt7hknbg8apfps9.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/script.external_request",discoveryDocs:["https://script.googleapis.com/$discovery/rest?version=v1"]}),_=function(){function e(t){var a=t.name,n=void 0===a?"Parameter":a,r=t.pattern,i=void 0===r?"":r,o=t.item,l=void 0===o?"":o,c=t.flags,u=void 0===c?{i:!0,g:!1,m:!1}:c;Object(s.a)(this,e),this.name="Parameter",this.pattern="",this.item="",this.flags={i:!0,g:!1,m:!1},this.name=n,this.pattern=i,this.item=l,this.flags=u}return Object(c.a)(e,[{key:"flagsToString",value:function(){for(var e="",t=Object.keys(this.flags),a=0;a<t.length;a++){var n=t[a];this.flags[n]&&(e+=n)}return e}}]),e}(),B=function(){function e(t){Object(s.a)(this,e),this.name=t.name,this.item=t.item,this.expression=new RegExp(t.pattern,t.flagsToString())}return Object(c.a)(e,[{key:"apply",value:function(e){var t=this,a="";return e.replace(this.expression,function(e){a+=e.replace(t.expression,t.item)}),a}}]),e}(),R=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"grab",value:function(e,t){var a=e.map(function(e){return new B(e)});return function(e){var n=a.reduce(function(t,a){return t[a.name]=a.apply(e),t},{});return t.replace(/%(.+?)%/g,function(e,t){return n[t]})}}}]),e}(),$=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={links:"https://reactjs.org\nhttps://learn.javascript.ru",parameters:[new _({name:"Title",pattern:"<title.*?>(.+)<\\/title>",item:"$1"}),new _({name:"Links",pattern:'<a.+?href="(http.+?)".*?>([^<>].+?)<\\/a>',item:"<li>$2: $1</li>",flags:{i:!0,g:!0,m:!1}})],itemsContainer:"<b>%Title%</b><br><ul>%Links%</ul>",result:[],user:null},a._userUpdate=function(e){a.setState({user:e?M.user:null})},a.authHandler=function(){M.authorize()},a.changeHandler=function(e){return function(t){a.setState(Object(l.a)({},e,t.target.value))}},a.runHandler=function(){var e=a.state,t=e.parameters,n=e.itemsContainer,r=e.links,i=R.grab(t,n);Promise.all(r.split("\n").map(function(e){return M.fetch(e)})).then(function(e){return e.map(function(e){return i(e)})}).then(function(e){return a.setState({result:e})})},a.parameterChangeHandler=function(e,t){return function(n,r){a.setState(function(a){return a.parameters[e][t]=r,a})}},a.parameterCheckHandler=function(e,t){return function(n,r){a.setState(function(a){return a.parameters[e].flags[t]=r,a})}},a.parameterDeleteHandler=function(e){return function(){a.setState(function(t){return t.parameters.splice(e,1),t})}},a.parameterAddHandler=function(){a.setState(function(e){return e.parameters.push(new _({})),e})},M.onStatusUpdate=a._userUpdate,a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.links,i=a.parameters,o=a.itemsContainer,l=a.user,s=a.result;return r.a.createElement("div",{className:t.root},r.a.createElement(g.a,{position:"static",className:t.appBar},r.a.createElement(v.a,null,r.a.createElement(j.a,{variant:"h6",color:"inherit",className:t.grow},"Data grabber"),r.a.createElement(d.a,{className:t.button,color:"inherit",onClick:this.authHandler},l?l.w3.ig:"Login"))),r.a.createElement("div",{className:t.container},r.a.createElement(P,{label:"Links",value:n,onChange:this.changeHandler("links")})),i.map(function(a,n){return r.a.createElement("div",{className:t.container},r.a.createElement("div",{className:t.row},r.a.createElement(E.a,{fullWidth:!0,label:"Name",variant:"outlined",value:a.name,onChange:e.parameterChangeHandler(n,"name")}),r.a.createElement(y.a,{row:!0,className:t.flags},Object.keys(a.flags).map(function(t){return r.a.createElement(S.a,{control:r.a.createElement(H.a,{value:t,checked:a.flags[t],onChange:e.parameterCheckHandler(n,t)}),label:t})})),r.a.createElement(d.a,{variant:"outlined",color:"secondary",onClick:e.parameterDeleteHandler(n)},"Remove")),r.a.createElement("div",{className:t.row},r.a.createElement(E.a,{fullWidth:!0,variant:"outlined",label:"Pattern",value:a.pattern,onChange:e.parameterChangeHandler(n,"pattern")})),r.a.createElement("div",{className:t.row},r.a.createElement(E.a,{fullWidth:!0,variant:"outlined",label:"Item",value:a.item,onChange:e.parameterChangeHandler(n,"item")})))}),r.a.createElement("div",{className:t.container},r.a.createElement(d.a,{variant:"outlined",color:"primary",className:t.button,onClick:this.runHandler,disabled:!l},"Run"),r.a.createElement(d.a,{variant:"outlined",className:t.button,onClick:this.addHandler,disabled:!l},"Add")),r.a.createElement("div",{className:t.container},r.a.createElement(P,{label:"Items container",value:o,onChange:this.changeHandler("itemsContainer")})),s.length>0&&s.map(function(e){return r.a.createElement("div",{className:t.container,dangerouslySetInnerHTML:{__html:e}})}))}}]),t}(n.Component),D=Object(I.withStyles)({root:{flexGrow:1},appBar:{},grow:{flexGrow:1},container:{padding:20},button:{marginRight:20},icon:{fontSize:26,margin:5},row:{display:"flex",alignItems:"center",marginTop:10,marginBottom:10},flags:{marginLeft:30,minWidth:180}})($);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},99:function(e,t,a){e.exports=a(249)}},[[99,2,1]]]);
//# sourceMappingURL=main.6c89ccaa.chunk.js.map