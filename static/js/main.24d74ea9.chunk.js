(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{249:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(16),c=n.n(i),o=n(41),s=n(43),l=n(42),u=n(44),h=n(18),m=n(19),d=n(27),f=n.n(d),p=n(97),g=n.n(p),b=n(98),v=n.n(b),O=n(59),j=n.n(O),w=n(32),E=n(26),y=n.n(E),k=function(e){var t=e.label,n=e.value,a=e.onChange;return r.a.createElement(y.a,{label:t,fullWidth:!0,multiline:!0,variant:"outlined",value:n,onChange:a})},N=n(94),S=n.n(N),C=n(95),H=n.n(C),I=n(96),x=n.n(I),P=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).changeHandler=function(e){return function(t,a){return n.setState(Object(o.a)({},e,a))}},n.checkHandler=function(e){return function(t,a){n.setState(function(t){return t.flags[e]=a,t})}},n.state=e.value,n}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.classes,i=t.onRemove,c=this.state,o=c.name,s=c.flags,l=c.pattern,u=c.item;return r.a.createElement("div",{className:n},r.a.createElement("div",{className:a.row},r.a.createElement(y.a,{fullWidth:!0,label:"Name",variant:"outlined",value:o,onChange:this.changeHandler("name")}),r.a.createElement(S.a,{row:!0,className:a.flags},Object.keys(s).map(function(t){return r.a.createElement(H.a,{control:r.a.createElement(x.a,{value:t,checked:s[t],onChange:e.checkHandler(t)}),label:t})})),r.a.createElement(f.a,{variant:"outlined",color:"secondary",onClick:i},"Remove")),r.a.createElement("div",{className:a.row},r.a.createElement(y.a,{fullWidth:!0,variant:"outlined",label:"Pattern",value:l,onChange:this.changeHandler("pattern")})),r.a.createElement("div",{className:a.row},r.a.createElement(y.a,{fullWidth:!0,variant:"outlined",label:"Item",value:u,onChange:this.changeHandler("item")})))}}]),t}(a.Component),L=Object(w.withStyles)({row:{display:"flex",alignItems:"center",marginTop:10,marginBottom:10},flags:{marginLeft:30,minWidth:180}})(P),T=n(28),U=n(15),W=function(){function e(t){var n=this;Object(h.a)(this,e),Object.defineProperty(this,A,{writable:!0,value:void 0}),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,q,{writable:!0,value:!1}),Object.defineProperty(this,z,{writable:!0,value:null}),Object.defineProperty(this,B,{writable:!0,value:function(e){Object(U.a)(n,q)[q]=e,Object(U.a)(n,z)[z]&&Object(U.a)(n,z)[z](e)}});var a=function(){Object(U.a)(n,R)[R]=Object(U.a)(n,A)[A].auth2.getAuthInstance(),Object(U.a)(n,R)[R].isSignedIn.listen(Object(U.a)(n,B)[B]),Object(U.a)(n,B)[B](Object(U.a)(n,R)[R].isSignedIn.get())},r=function(){Object(U.a)(n,A)[A].client.init(t).then(a)},i=function(){Object(U.a)(n,A)[A]=window.gapi,Object(U.a)(n,A)[A].load("client:auth2",r)};window.gapi?i():window.addEventListener("gapiLoaded",i)}return Object(m.a)(e,[{key:"authorize",value:function(){return Object(U.a)(this,q)[q]?Object(U.a)(this,R)[R].signOut():Object(U.a)(this,R)[R].signIn()}},{key:"fetch",value:function(e){var t={function:"fetch",parameters:[e],devMode:!0},n=Object(U.a)(this,A)[A].client.request({root:"https://script.googleapis.com",path:"v1/scripts/M1qUJ-bECOgm4Y9z9evwE5gNpR_a-QLCI:run",method:"POST",body:t});return new Promise(function(e,t){n.execute(function(n){if(n.error&&n.error.status)t("Error calling API: "+JSON.stringify(n,null,2));else if(n.error){var a=n.error.details[0];t("Script error! Message: "+a.errorMessage)}else e(n.response.result)})})}},{key:"onStatusUpdate",set:function(e){Object(U.a)(this,z)[z]=e}},{key:"user",get:function(){return Object(U.a)(this,R)[R].currentUser.get()}}]),e}(),A=Object(T.a)("gapi"),R=Object(T.a)("googleAuth"),q=Object(T.a)("isAuthorized"),z=Object(T.a)("onStatusUpdate"),B=Object(T.a)("satusUpdate"),M=new W({apiKey:"AIzaSyA0rvMrNVWVhm8HNd56eY64OXhVEVIxqlQ",clientId:"169025190639-ktoqejmqod0hcfh8pbt7hknbg8apfps9.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/script.external_request",discoveryDocs:["https://script.googleapis.com/$discovery/rest?version=v1"]}),_=function(){function e(t){Object(h.a)(this,e),this.name=t.name,this.item=t.item,this.expression=new RegExp(t.pattern,t.flagsToString())}return Object(m.a)(e,[{key:"apply",value:function(e){var t=this,n="";return e.replace(this.expression,function(e){n+=e.replace(t.expression,t.item)}),n}}]),e}(),$=function(){function e(){Object(h.a)(this,e)}return Object(m.a)(e,null,[{key:"grab",value:function(e,t){var n=e.map(function(e){return new _(e)});return function(e){var a=n.reduce(function(t,n){return t[n.name]=n.apply(e),t},{});return t.replace(/%(.+?)%/g,function(e,t){return a[t]})}}}]),e}(),J=function(){function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{i:!0,g:!1,m:!1};Object(h.a)(this,e),this.name="Parameter",this.pattern="",this.item="",this.flags={i:!0,g:!1,m:!1},this.name=t,this.pattern=n,this.item=a,this.flags=r}return Object(m.a)(e,[{key:"flagsToString",value:function(){for(var e="",t=Object.keys(this.flags),n=0;n<t.length;n++){var a=t[n];this.flags[a]&&(e+=a)}return e}}]),e}(),V=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={links:"https://reactjs.org",parameters:[new J("Title","<title.*?>(.+)<\\/title>","$1"),new J("Links",'<a.+?href="(.+?)".*?>([^<>]+?)<\\/a>',"<li>$2: $1</li>",{i:!0,g:!0,m:!1})],itemsContainer:"<b>%Title%</b><br><ul>%Links%</ul>",result:[],user:null},n._userUpdate=function(e){n.setState({user:e?M.user:null})},n.authHandler=function(){M.authorize()},n.runHandler=function(){var e=n.state,t=e.parameters,a=e.itemsContainer,r=e.links,i=$.grab(t,a);Promise.all(r.split("\n").map(function(e){return M.fetch(e)})).then(function(e){return e.map(function(e){return i(e)})}).then(function(e){return n.setState({result:e})})},n.changeHandler=function(e){return function(t){n.setState(Object(o.a)({},e,t.target.value))}},n.deleteHandler=function(e){return function(){n.setState(function(t,n){return t.parameters.splice(e,1),t})}},n.addHandler=function(){n.setState(function(e,t){return e.parameters.push(new L("Parameter","")),e})},M.onStatusUpdate=n._userUpdate,n}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,a=n.links,i=n.parameters,c=n.itemsContainer,o=n.user,s=n.result;return r.a.createElement("div",{className:t.root},r.a.createElement(g.a,{position:"static",className:t.appBar},r.a.createElement(v.a,null,r.a.createElement(j.a,{variant:"h6",color:"inherit",className:t.grow},"Data grabber"),r.a.createElement(f.a,{className:t.button,color:"inherit",onClick:this.authHandler},o?o.w3.ig:"Login"))),r.a.createElement("div",{className:t.container},r.a.createElement(k,{label:"Links",value:a,onChange:this.changeHandler("links")})),i.map(function(n,a){return r.a.createElement(L,{value:n,className:t.container,onRemove:e.deleteHandler(a)})}),r.a.createElement("div",{className:t.container},r.a.createElement(f.a,{variant:"outlined",color:"primary",className:t.button,onClick:this.runHandler,disabled:!o},"Run"),r.a.createElement(f.a,{variant:"outlined",className:t.button,onClick:this.addHandler,disabled:!o},"Add")),r.a.createElement("div",{className:t.container},r.a.createElement(k,{label:"Items container",value:c,onChange:this.changeHandler("itemsContainer")})),s.length>0&&s.map(function(e){return r.a.createElement("div",{className:t.container,dangerouslySetInnerHTML:{__html:e}})}))}}]),t}(a.Component),D=Object(w.withStyles)(function(e){return{root:{flexGrow:1},appBar:{},grow:{flexGrow:1},container:{padding:20},button:{marginRight:20},icon:{fontSize:26,margin:5},row:{display:"flex",alignItems:"center",marginTop:10,marginBottom:10},grid:{}}})(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},99:function(e,t,n){e.exports=n(249)}},[[99,2,1]]]);
//# sourceMappingURL=main.24d74ea9.chunk.js.map